(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{175:function(e,t){e.exports="/images/icon-phone.png"},179:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n.n(r),i=n(4),o=n.n(i),s=n(5),c=n.n(s),u=n(6),l=n.n(u),p=n(10),h=n.n(p),f=n(11),m=n.n(f),d=n(8),y=n.n(d),v=n(0),g=n.n(v),b=n(16),C=n(12),S=n(17),E=(n(75),n(76),n(77),n(82)),k=n(19),R=n(26);function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var N=function(e){h()(i,e);var t,r=(t=i,function(){var e,n=y()(t);if(P()){var r=y()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function i(e){var t;return o()(this,i),(t=r.call(this,e))._onChangeInputPhone=t._onChangeInputPhone.bind(l()(t)),t._submit=t._submit.bind(l()(t)),t.state={errorMsg:null},t._sendOTP=t._sendOTP.bind(l()(t)),t}return c()(i,[{key:"shouldComponentUpdate",value:function(e,t){return this.props!=e&&(0==e.app.register.error?(this.props.approvalPhone(this.phone),this._sendOTP()):1==e.app.register.error&&(t.errorMsg="Số điện thoại đã được đăng ký")),!0}},{key:"_onChangeInputPhone",value:function(e){var t=e.target.value;if(t=E.a.format(t)){if(t.length>12)return;this.phoneInputRef.value=t}}},{key:"_sendOTP",value:function(){var e=this;this.props.firebase.sendOTP(this.phone,(function(t){0==t?e.props.appActions.pushStateRegister(2):(e.props.appActions.pushStateRegister(2),e.setState({errorMsg:"Có lỗi xảy ra trong quá trình gửi mã OTP đến số điện thoại này"}))}))}},{key:"_submit",value:function(){try{var e=this.phoneInputRef.value;R.c.isValidPhone(e)&&(e=E.a.standardized(e),this.props.appActions.checkPhone(e),this.phone=e)}catch(e){this.setState({errorMsg:e})}}},{key:"render",value:function(){var e=this,t=this.props.app.register.isLoading;return g.a.createElement(k.a,a()({},this.props,{copyright:!0}),g.a.createElement("span",{className:"contact100-form-title"},"Đăng ký",g.a.createElement("div",{className:"line-bt"})," "),g.a.createElement("div",{className:"form-container"},g.a.createElement("div",{className:"input-shell"},g.a.createElement("img",{src:n(175)}),g.a.createElement("input",{ref:function(t){return e.phoneInputRef=t},onChange:this._onChangeInputPhone,placeholder:"Vui lòng nhập số điện thoại",type:"tel",pattern:"[0-9]{4}.[0-9]{3}.[0-9]{3}"})),g.a.createElement("div",{style:{height:"40px"}},!t&&this.state.errorMsg&&g.a.createElement("span",{style:{color:"red",fontSize:"small"}},"*** ",this.state.errorMsg))),g.a.createElement("div",{className:"btn-container"},g.a.createElement("button",{onClick:this._submit,className:"btn-insee btn-insee-bg"},"Đăng ký")))}}]),i}(v.Component);function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var D=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=y()(t);if(M()){var r=y()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return o()(this,r),(t=n.call(this,e)).state={count:t.props.count},t.countdown=t.countdown.bind(l()(t)),t.done=t.done.bind(l()(t)),t.reset=t.reset.bind(l()(t)),t}return c()(r,[{key:"shouldComponentUpdate",value:function(e,t){return 0!=t.count||(this.done(),!1)}},{key:"componentDidMount",value:function(){this.countdown()}},{key:"reset",value:function(){this.setState({color:this.props.count})}},{key:"countdown",value:function(){var e=setInterval(function(){var t=this.state.count-1;this.setState({count:t}),t<=0&&clearInterval(e)}.bind(this),1e3)}},{key:"toCountString",value:function(e){var t="",n=parseInt(e/60);n>0&&(t=t+n+" phút ");var r=e-60*n;return r>0&&(t=t+r+" giây"),t}},{key:"done",value:function(){this.props.done&&this.props.done()}},{key:"render",value:function(){return g.a.createElement("span",{style:{color:"#b71c1c",fontWeight:"600"}},this.toCountString(this.state.count))}}]),r}(v.Component);function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var w=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=y()(t);if(_()){var r=y()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return o()(this,r),(t=n.call(this,e))._onKeyPress=t._onKeyPress.bind(l()(t)),t.getSMSCode=t.getSMSCode.bind(l()(t)),t._onSubmitSMSCode=t._onSubmitSMSCode.bind(l()(t)),t.data=t.props.app.register,t.goToNextStep=t.goToNextStep.bind(l()(t)),t.resetInput=t.resetInput.bind(l()(t)),t.counterEnd=t.counterEnd.bind(l()(t)),t.sendOTP=t.sendOTP.bind(l()(t)),t._onClickResetSMSCode=t._onClickResetSMSCode.bind(l()(t)),t.confirmFailed=t.confirmFailed.bind(l()(t)),t.state={errorMsg:null,smsError:0,statusSending:-1},t}return c()(r,[{key:"componentDidMount",value:function(){this.countDownRef.reset()}},{key:"goToNextStep",value:function(e){console.log(e)}},{key:"resetInput",value:function(){for(var e=1;e<=6;e++){this["smsCodeInput"+e].value=""}}},{key:"sendOTP",value:function(){var e=this,t=this.props.phone;t&&(this.setState({statusSending:1}),this.props.firebase.sendOTP(t,(function(t){0==t?(e.setState({statusSending:2}),e.countDownRef.reset()):e.setState({statusSending:3,errorMsg:"Gửi OTP thất bại, bạn vui lòng kiểm tra lại số điện thoại"})})))}},{key:"_onClickResetSMSCode",value:function(){this.sendOTP(),this.resetInput(),this.state={errorMsg:null,smsError:0},this.props.appActions.setStatusLoading(!0)}},{key:"confirmFailed",value:function(){this.setState({smsError:-1,errorMsg:"OTP sai vui lòng thử lại"}),this.resetInput()}},{key:"_onSubmitSMSCode",value:function(){var e=this;if(0==this.state.smsError||-1==this.state.smsError){this.setState({errorMsg:null});var t=this.getSMSCode();if(null==t||t.length<6)return void this.setState({errorMsg:"Vui lòng nhập mã OTP"});this.props.firebase.confirm(t,(function(t,n){0==t?e.goToNextStep(n):e.confirmFailed()}))}}},{key:"_onKeyPress",value:function(e,t){if("Backspace"==e.key){var n=t-1;if(n>0)this["smsCodeInput"+n].focus()}else if(e.key>=0&&e.key<=9){var r=t+1;if(r<=6)this["smsCodeInput"+r].focus()}}},{key:"_onChange",value:function(e){e.target.value?e.target.value=e.target.value%10:e.target.value=null}},{key:"getSMSCode",value:function(){for(var e="",t=1;t<=6;t++){var n=this["smsCodeInput"+t].value;if(!n)return null;e+=n}return e}},{key:"counterEnd",value:function(){this.setState({smsError:-10,errorMsg:"Mã OTP đã hết hạn, bấm Gửi Lại Mã để nhận OTP mới"})}},{key:"render",value:function(){var e=this;return g.a.createElement(k.a,this.props,g.a.createElement("span",{className:"contact100-form-title"},"Nhập OTP",g.a.createElement("div",{className:"line-bt"})),g.a.createElement("div",{className:"form-description"},"Vui lòng nhập số OTP( được gửi đến SDT bạn) vào ô bên dưới và bấm xác nhận để hoàn tất truy cập vào hệ thống"),g.a.createElement("div",{className:"form-center"},g.a.createElement("div",{style:{padding:"20px 10px"}},g.a.createElement(D,{ref:function(t){return e.countDownRef=t},count:60,done:this.counterEnd})),this.state.errorMsg&&g.a.createElement("div",{className:"error-msg"},this.state.errorMsg),g.a.createElement("div",{className:"wrap-input100 wrap-input25"},g.a.createElement("input",{ref:function(t){return e.smsCodeInput1=t},onChange:this._onChange,onKeyUp:function(t){e._onKeyPress(t,1)},className:"input100",type:"number"})),g.a.createElement("div",{className:"wrap-input100 wrap-input25"},g.a.createElement("input",{ref:function(t){return e.smsCodeInput2=t},onChange:this._onChange,onKeyUp:function(t){e._onKeyPress(t,2)},className:"input100",type:"number"})),g.a.createElement("div",{className:"wrap-input100 wrap-input25"},g.a.createElement("input",{ref:function(t){return e.smsCodeInput3=t},onChange:this._onChange,onKeyUp:function(t){e._onKeyPress(t,3)},className:"input100",type:"number"})),g.a.createElement("div",{className:"wrap-input100 wrap-input25"},g.a.createElement("input",{ref:function(t){return e.smsCodeInput4=t},onChange:this._onChange,onKeyUp:function(t){e._onKeyPress(t,4)},className:"input100",type:"number"})),g.a.createElement("div",{className:"wrap-input100 wrap-input25"},g.a.createElement("input",{ref:function(t){return e.smsCodeInput5=t},onChange:this._onChange,onKeyUp:function(t){e._onKeyPress(t,5)},className:"input100",type:"number"})),g.a.createElement("div",{className:"wrap-input100 wrap-input25"},g.a.createElement("input",{ref:function(t){return e.smsCodeInput6=t},onChange:this._onChange,onKeyUp:function(t){e._onKeyPress(t,6)},className:"input100",type:"number"}))),g.a.createElement("div",{className:"btn-container center"},g.a.createElement("div",{className:"btn-retry-send-code"},g.a.createElement("button",{onClick:this._onClickResetSMSCode,className:"btn-insee btn-default-none-bg"},"Gửi lại mã")),g.a.createElement("div",{className:"btn-submit-otp"},g.a.createElement("button",{onClick:this._onSubmitSMSCode,className:"btn-insee btn-insee-bg"},"Đăng ký"))))}}]),r}(v.Component),I=n(14),O=n.n(I),T=n(44);function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var K=T.a.getArrayYear().reverse(),V=T.a.getArrayMonth(),A=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=y()(t);if(x()){var r=y()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return o()(this,r),(t=n.call(this,e)).state={year:0,month:0,day:0,default:null},t.onChangeMonth=t.onChangeMonth.bind(l()(t)),t.onChangeYear=t.onChangeYear.bind(l()(t)),t.onChangeDay=t.onChangeDay.bind(l()(t)),t.getListDay=t.getListDay.bind(l()(t)),t.getValue=t.getValue.bind(l()(t)),t}return c()(r,[{key:"shouldComponentUpdate",value:function(e,t){if(e.default&&e.default!=t.default&&null==t.default){var n=new Date(1e3*e.default),r=n.getDate(),a=n.getFullYear(),i=n.getMonth()+1;return t.year=a,t.day=r,t.month=i,!0}return this.state!=t}},{key:"getValue",value:function(){var e="",t=0,n=0;return 0==this.state.year?(e="Vui lòng chọn năm sinh",t=-1):0==this.state.month?(e="Vui lòng chọn tháng sinh",t=-1):0==this.state.day?(e="Vui lòng chọn ngày sinh",t=-1):n=new Date(this.state.year,this.state.month,this.state.day,0,0,0,0).getTime(),{error:t,errorMsg:e,value:n}}},{key:"getListDay",value:function(e,t){return 0==e||0==t?[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]:T.a.getArrayDay(t,e)}},{key:"onChangeDay",value:function(e){var t=e.target.value;this.setState({day:t})}},{key:"onChangeYear",value:function(e){var t=e.target.value;this.setState({year:t})}},{key:"onChangeMonth",value:function(e){var t=e.target.value;this.setState({month:t})}},{key:"render",value:function(){var e=this.getListDay(this.state.year,this.state.month);return g.a.createElement("div",{className:"birthday"},g.a.createElement("div",{style:{float:"left"},className:"birthday-item"},g.a.createElement("select",{value:this.state.day,onChange:this.onChangeDay},g.a.createElement("option",{value:0},"Ngày"),e&&e.map((function(e){return g.a.createElement("option",{key:e,value:e},e)})))),g.a.createElement("div",{className:"birthday-item"},g.a.createElement("select",{value:this.state.month,onChange:this.onChangeMonth},g.a.createElement("option",null,"Tháng"),V.map((function(e){return g.a.createElement("option",{key:e.id,value:e.id},e.name)})))),g.a.createElement("div",{style:{float:"right"},className:"birthday-item"},g.a.createElement("select",{value:this.state.year,onChange:this.onChangeYear},g.a.createElement("option",{value:0},"Năm sinh"),K.map((function(e){return g.a.createElement("option",{key:e,value:e},e)})))))}}]),r}(v.Component),U=n(24);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.Component;var z=n(20);function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}v.Component;var Y=n(49),G=n(176);n(177);function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var J={apiKey:"AIzaSyAs4x1pmuienHn21ulZ4zuhweTFt4ujCEI",authDomain:"insee-1ce3f.firebaseapp.com",projectId:"insee-1ce3f",storageBucket:"insee-1ce3f.appspot.com",messagingSenderId:"471532250212",appId:"1:471532250212:web:a6607b67a18dccb0a56b71",measurementId:"G-72T8VS69CZ"},W=!1,Z=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=y()(t);if(B()){var r=y()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return o()(this,r),t=n.call(this,e),W||(G.a.initializeApp(J),G.a.auth().languageCode="vi",W=!0),t.dataRecaptcha=null,t.dataConfirmation=null,t.recaptcha=t.recaptcha.bind(l()(t)),t.sendOTP=t.sendOTP.bind(l()(t)),t.confirm=t.confirm.bind(l()(t)),t}return c()(r,[{key:"componentDidMount",value:function(){this.recaptcha()}},{key:"recaptcha",value:function(){var e=new G.a.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible"});return this.dataRecaptcha=e,e}},{key:"sendOTP",value:function(e,t){var n=this.dataRecaptcha?this.dataRecaptcha:this.recaptcha();G.a.auth().signInWithPhoneNumber(e,n).then(function(e){this.dataConfirmation=e,t(0)}.bind(this)).catch(function(e){t(-1)}.bind(this))}},{key:"confirm",value:function(e,t){this.dataConfirmation.confirm(e).then((function(e){t(0,e)})).catch((function(e){t(-1,null)}))}},{key:"render",value:function(){return g.a.createElement("div",null,!this.state.recaptcha&&g.a.createElement("div",null,"Not Support!!!"),this.state.recaptcha&&this.props.children,g.a.createElement("div",{id:"recaptcha-container"}))}}]),r}(g.a.Component);function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=y()(t);if(q()){var r=y()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t;return o()(this,r),(t=n.call(this,e)).phone=null,t.approvalPhone=t.approvalPhone.bind(l()(t)),t}return c()(r,[{key:"approvalPhone",value:function(e){this.phone=e}},{key:"render",value:function(){var e=this,t=this.props.app.register;return g.a.createElement("div",null,t&&g.a.createElement(Z,{ref:function(t){return e.firebase=t}},1==t.step&&g.a.createElement(N,a()({approvalPhone:this.approvalPhone,firebase:this.firebase},this.props)),2==t.step&&g.a.createElement(w,a()({phone:this.phone,firebase:this.firebase},this.props))),g.a.createElement(Y.a,this.props))}}]),r}(g.a.Component);t.default=Object(b.b)((function(e){return{app:e.app}}),(function(e){return{appActions:Object(C.b)(S,e)}}))(H)}}]);