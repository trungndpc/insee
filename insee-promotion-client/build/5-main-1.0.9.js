(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{129:function(t,e){t.exports="https://nhathau.insee.com.vn/static/images/icon-phone.png"},190:function(t,e,n){"use strict";n.r(e);var r=n(27),a=n.n(r),i=n(2),s=n.n(i),o=n(3),c=n.n(o),u=n(12),l=n.n(u),h=n(6),p=n.n(h),f=n(7),d=n.n(f),m=n(5),y=n.n(m),g=n(0),v=n.n(g),k=n(15),E=n(11),b=n(17),C=(n(51),n(52),n(53),n(42)),V=n(21),S=n(86),N=n(9),_=function(){function t(){s()(this,t)}return c()(t,null,[{key:"checkPhone",value:function(t){var e={phone:t};return new Promise((function(t,n){N.a.postJSONWithCredentials("https://nhathau.insee.com.vn/authen/check-phone",JSON.stringify(e),t,n)}))}},{key:"updateCustomer",value:function(t){var e={phone:t.phone,mainAreaId:t.location,pass:t.password,fullName:t.name};return new Promise((function(t,n){N.a.postJSONWithCredentials("https://nhathau.insee.com.vn/api/customer/update",JSON.stringify(e),t,n)}))}},{key:"login",value:function(t){var e={phone:t.phone,idToken:t.token};return new Promise((function(t,n){N.a.postJSONWithCredentials("https://nhathau.insee.com.vn/authen/login",JSON.stringify(e),t,n)}))}}]),t}(),w=n(35),P="Lỗi đường truyền!!!",R="Đăng ký thất bại",T="Lỗi đường truyền",M="Số điện thoại đã được đăng ký",D="Có lỗi xảy ra trong quá trình gửi mã OTP đến số điện thoại này",x="Mã OTP đã hết hạn, bấm Gửi Lại Mã để nhận OTP mới",O="Vui lòng nhập mã OTP",A="Mã OTP không đúng vui lòng thử lại";function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var L=function(t){p()(i,t);var e,r=(e=i,function(){var t,n=y()(e);if(I()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function i(t){var e;return s()(this,i),(e=r.call(this,t)).state={errorMsg:null},e.phone=null,e._formatPhone=e._formatPhone.bind(l()(e)),e._submit=e._submit.bind(l()(e)),e._sendOTP=e._sendOTP.bind(l()(e)),e._setErrorMessage=e._setErrorMessage.bind(l()(e)),e}return c()(i,[{key:"_sendOTP",value:function(){var t=this;this.props.firebase.sendOTP(this.phone,(function(e){t.props.appActions.setStatusLoading(!1),e==w.a.SUCCESS?(t.props.setPhone(t.phone),t.props.appActions.pushStateRegister(2)):t._setErrorMessage(D)}))}},{key:"_submit",value:function(){var t=this;try{var e=this.phoneInputRef.value;S.c.isValidPhone(e)&&(e=C.a.standardized(e),this.phone=e,this.props.appActions.setStatusLoading(!0),_.checkPhone(e).then((function(e){e.error==w.a.SUCCESS?t._sendOTP():t._setErrorMessage(M)})).catch((function(e){t._setErrorMessage(P)})))}catch(t){this.setState({errorMsg:t})}}},{key:"_setErrorMessage",value:function(t){this.setState({errorMsg:t})}},{key:"_formatPhone",value:function(t){var e=t.target.value;(e=C.a.format(e))&&e.length>12||(this.phoneInputRef.value=e)}},{key:"render",value:function(){var t=this;return v.a.createElement(V.a,a()({},this.props,{copyright:!0}),v.a.createElement("span",{className:"contact100-form-title"},"Đăng ký",v.a.createElement("div",{className:"line-bt"})," "),v.a.createElement("div",{className:"form-container"},v.a.createElement("div",{className:"input-shell"},v.a.createElement("img",{src:n(129)}),v.a.createElement("input",{ref:function(e){return t.phoneInputRef=e},onChange:this._formatPhone,placeholder:"Vui lòng nhập số điện thoại",type:"tel",pattern:"[0-9]{4}.[0-9]{3}.[0-9]{3}"})),v.a.createElement("div",{style:{marginTop:"40px"}},this.state.errorMsg&&v.a.createElement("span",{style:{color:"red",fontSize:"medium"}},"*** ",this.state.errorMsg))),v.a.createElement("div",{className:"btn-container"},v.a.createElement("button",{onClick:this._submit,className:"btn-insee btn-insee-bg"},"Đăng ký")))}}]),i}(g.Component);function K(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var U=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(K()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),(e=n.call(this,t)).state={count:e.props.count},e.countdown=e.countdown.bind(l()(e)),e.done=e.done.bind(l()(e)),e.reset=e.reset.bind(l()(e)),e.isExpired=e.isExpired.bind(l()(e)),e}return c()(r,[{key:"componentDidMount",value:function(){this.state.count>0&&this.countdown()}},{key:"reset",value:function(){this.setState({count:this.props.count})}},{key:"countdown",value:function(){var t=setInterval(function(){var e=this.state.count-1;this.setState({count:e}),e<=0&&(clearInterval(t),this.props.done())}.bind(this),1e3)}},{key:"toCountString",value:function(t){var e="",n=parseInt(t/60);n>0&&(e=e+n+" phút ");var r=t-60*n;return r>0&&(e=e+r+" giây"),e}},{key:"done",value:function(){this.props.done&&this.props.done()}},{key:"isExpired",value:function(){return this.state.count<=0}},{key:"render",value:function(){return v.a.createElement("span",{style:{color:"#b71c1c",fontWeight:"600"}},this.toCountString(this.state.count))}}]),r}(g.Component);function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var J=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(q()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),(e=n.call(this,t)).getValue=e.getValue.bind(l()(e)),e.reset=e.reset.bind(l()(e)),e._onChange=e._onChange.bind(l()(e)),e._onKeyPress=e._onKeyPress.bind(l()(e)),e}return c()(r,[{key:"getValue",value:function(){for(var t="",e=1;e<=6;e++){var n=this["smsCodeInput"+e].value;if(!n)return null;t+=n}return t}},{key:"reset",value:function(){for(var t=1;t<=6;t++){this["smsCodeInput"+t].value=""}}},{key:"_onChange",value:function(t){t.target.value?t.target.value=t.target.value%10:t.target.value=null}},{key:"_onKeyPress",value:function(t,e){if("Backspace"==t.key){var n=e-1;if(n>0)this["smsCodeInput"+n].focus()}else if(t.key>=0&&t.key<=9){var r=e+1;if(r<=6)this["smsCodeInput"+r].focus()}}},{key:"render",value:function(){var t=this;return v.a.createElement("div",null,v.a.createElement("div",{className:"wrap-input100 wrap-input25"},v.a.createElement("input",{ref:function(e){return t.smsCodeInput1=e},onChange:this._onChange,onKeyUp:function(e){t._onKeyPress(e,1)},className:"input100",type:"number"})),v.a.createElement("div",{className:"wrap-input100 wrap-input25"},v.a.createElement("input",{ref:function(e){return t.smsCodeInput2=e},onChange:this._onChange,onKeyUp:function(e){t._onKeyPress(e,2)},className:"input100",type:"number"})),v.a.createElement("div",{className:"wrap-input100 wrap-input25"},v.a.createElement("input",{ref:function(e){return t.smsCodeInput3=e},onChange:this._onChange,onKeyUp:function(e){t._onKeyPress(e,3)},className:"input100",type:"number"})),v.a.createElement("div",{className:"wrap-input100 wrap-input25"},v.a.createElement("input",{ref:function(e){return t.smsCodeInput4=e},onChange:this._onChange,onKeyUp:function(e){t._onKeyPress(e,4)},className:"input100",type:"number"})),v.a.createElement("div",{className:"wrap-input100 wrap-input25"},v.a.createElement("input",{ref:function(e){return t.smsCodeInput5=e},onChange:this._onChange,onKeyUp:function(e){t._onKeyPress(e,5)},className:"input100",type:"number"})),v.a.createElement("div",{className:"wrap-input100 wrap-input25"},v.a.createElement("input",{ref:function(e){return t.smsCodeInput6=e},onChange:this._onChange,onKeyUp:function(e){t._onKeyPress(e,6)},className:"input100",type:"number"})))}}]),r}(g.Component);function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Q=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(z()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),(e=n.call(this,t)).state={errorMsg:null},e.expires=e.expires.bind(l()(e)),e._sendOTP=e._sendOTP.bind(l()(e)),e._resetOTP=e._resetOTP.bind(l()(e)),e._submit=e._submit.bind(l()(e)),e._setErrorMessage=e._setErrorMessage.bind(l()(e)),e._resetErrorMessage=e._resetErrorMessage.bind(l()(e)),e._nextStep=e._nextStep.bind(l()(e)),e}return c()(r,[{key:"componentDidMount",value:function(){this.countDownRef.reset()}},{key:"expires",value:function(){this._setErrorMessage(x)}},{key:"_sendOTP",value:function(){var t=this;this.props.appActions.setStatusLoading(!0),this.props.firebase.sendOTP(this.props.phone,(function(e){t.props.appActions.setStatusLoading(!1),e==w.a.SUCCESS?t.countDownRef.reset():t._setErrorMessage(D)}))}},{key:"_resetOTP",value:function(){this._sendOTP(),this.optForm.reset(),this._resetErrorMessage()}},{key:"_submit",value:function(){var t=this;if(!this.countDownRef.isExpired()){this.props.appActions.setStatusLoading(!0),this._resetErrorMessage();var e=this.optForm.getValue();if(null==e||e.length<6)return this.props.appActions.setStatusLoading(!1),void this._setErrorMessage(O);this.props.firebase.confirm(e,(function(e,n){e==w.a.SUCCESS?n.user.getIdToken().then((function(e){_.login({phone:t.props.phone,token:e}).then((function(n){t.props.appActions.setStatusLoading(!1),n.error==w.a.SUCCESS?t._nextStep(e):t._setErrorMessage(T)})).catch((function(e){t._setErrorMessage(T),t.props.appActions.setStatusLoading(!1)}))})):(t.props.appActions.setStatusLoading(!1),t._setErrorMessage(A),t.optForm.reset())}))}}},{key:"_setErrorMessage",value:function(t){this.setState({errorMsg:t})}},{key:"_resetErrorMessage",value:function(){this.setState({errorMsg:null})}},{key:"_nextStep",value:function(t){this.props.setToken(t),this.props.appActions.pushStateRegister(3)}},{key:"render",value:function(){var t=this;return v.a.createElement(V.a,this.props,v.a.createElement("span",{className:"contact100-form-title"},"Nhập OTP",v.a.createElement("div",{className:"line-bt"})),v.a.createElement("div",{className:"form-description"},"Vui lòng nhập số OTP( được gửi đến SDT bạn) vào ô bên dưới và bấm xác nhận để hoàn tất truy cập vào hệ thống"),v.a.createElement("div",{className:"form-center"},v.a.createElement("div",{style:{padding:"20px 10px"}},v.a.createElement(U,{ref:function(e){return t.countDownRef=e},count:120,done:this.expires})),this.state.errorMsg&&v.a.createElement("div",{className:"error-msg"},this.state.errorMsg),v.a.createElement(J,{ref:function(e){return t.optForm=e}})),v.a.createElement("div",{className:"btn-container center"},v.a.createElement("div",{className:"btn-retry-send-code"},v.a.createElement("button",{onClick:this._resetOTP,className:"btn-insee btn-default-none-bg"},"Gửi lại mã")),v.a.createElement("div",{className:"btn-submit-otp"},v.a.createElement("button",{onClick:this._submit,className:"btn-insee btn-insee-bg"},"Đăng ký"))))}}]),r}(g.Component),W=n(25);function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var H=W.a.getArrayYear().reverse(),Y=W.a.getArrayMonth(),F=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(B()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),(e=n.call(this,t)).state={year:0,month:0,day:0,default:null},e.onChangeMonth=e.onChangeMonth.bind(l()(e)),e.onChangeYear=e.onChangeYear.bind(l()(e)),e.onChangeDay=e.onChangeDay.bind(l()(e)),e.getListDay=e.getListDay.bind(l()(e)),e.getValue=e.getValue.bind(l()(e)),e}return c()(r,[{key:"shouldComponentUpdate",value:function(t,e){if(t.default&&t.default!=this.props.default&&null==this.props.default){var n=new Date(1e3*t.default),r=n.getDate(),a=n.getFullYear(),i=n.getMonth()+1;return e.year=a,e.day=r,e.month=i,!0}return!0}},{key:"getValue",value:function(){var t="",e=0,n=0;return 0==this.state.year?(t="Vui lòng chọn năm sinh",e=-1):0==this.state.month?(t="Vui lòng chọn tháng sinh",e=-1):0==this.state.day?(t="Vui lòng chọn ngày sinh",e=-1):n=new Date(this.state.year,this.state.month,this.state.day,0,0,0,0).getTime(),{error:e,errorMsg:t,value:n}}},{key:"getListDay",value:function(t,e){return 0==t||0==e?[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]:W.a.getArrayDay(e,t)}},{key:"onChangeDay",value:function(t){var e=t.target.value;this.setState({day:e})}},{key:"onChangeYear",value:function(t){var e=t.target.value;this.setState({year:e})}},{key:"onChangeMonth",value:function(t){var e=t.target.value;this.setState({month:e})}},{key:"render",value:function(){var t=this.getListDay(this.state.year,this.state.month);return v.a.createElement("div",{className:"birthday"},v.a.createElement("div",{style:{float:"left"},className:"birthday-item"},v.a.createElement("select",{value:this.state.day,onChange:this.onChangeDay},v.a.createElement("option",{value:0},"Ngày"),t&&t.map((function(t){return v.a.createElement("option",{key:t,value:t},t)})))),v.a.createElement("div",{className:"birthday-item"},v.a.createElement("select",{value:this.state.month,onChange:this.onChangeMonth},v.a.createElement("option",null,"Tháng"),Y.map((function(t){return v.a.createElement("option",{key:t.id,value:t.id},t.name)})))),v.a.createElement("div",{style:{float:"right"},className:"birthday-item"},v.a.createElement("select",{value:this.state.year,onChange:this.onChangeYear},v.a.createElement("option",{value:0},"Năm sinh"),H.map((function(t){return v.a.createElement("option",{key:t,value:t},t)})))))}}]),r}(g.Component),G=n(22);function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var j=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(Z()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),(e=n.call(this,t)).state={errorMsg:null},e._submit=e._submit.bind(l()(e)),e._setErrorMessage=e._setErrorMessage.bind(l()(e)),e}return c()(r,[{key:"componentDidMount",value:function(){this.props.appActions.getProfile()}},{key:"shouldComponentUpdate",value:function(t,e){if(this.props!=t&&null!=t.app.user&&t.app.user&&!this.props.app.user){var n=t.app.user;e.name=n.name,e.birthday=n.birthday}return!0}},{key:"_submit",value:function(){var t=this;try{var e={token:this.props.token,name:this.nameInputRef.value,location:parseInt(this.mainAreaRef.value)},n=this.birthdayInputRef.getValue();S.c.isValidBirthday(n)&&(e.birthday=parseInt(n.value/1e3)),S.c.isValid2Create(e)&&(this.props.appActions.setStatusLoading(!0),_.updateCustomer(e).then((function(e){e.error==w.a.SUCCESS?t.props.appActions.pushStateRegister(4):t._setErrorMessage(R),t.props.appActions.setStatusLoading(!1)})).catch((function(e){t._setErrorMessage(T),t.props.appActions.setStatusLoading(!1)})))}catch(t){this.setState({errorMsg:t})}}},{key:"_setErrorMessage",value:function(t){this.setState({errorMsg:t})}},{key:"render",value:function(){var t=this;return v.a.createElement(V.a,this.props,v.a.createElement("span",{className:"contact100-form-title"},"Đăng ký",v.a.createElement("div",{className:"line-bt"})),v.a.createElement("div",{className:"form-description"},"Vui lòng nhập thông tin để tạo tài khoản"),v.a.createElement("div",{className:"form-row"},v.a.createElement("input",{ref:function(e){return t.nameInputRef=e},value:this.state.name,onChange:function(e){return t.setState({name:e.target.value})},className:"insee-input",type:"text",placeholder:"Họ và tên"})),v.a.createElement("div",{className:"form-row"},v.a.createElement(F,{default:this.state.birthday,ref:function(e){return t.birthdayInputRef=e}})),v.a.createElement("div",{className:"form-row"},v.a.createElement("select",{ref:function(e){return t.mainAreaRef=e},className:"insee-input"},v.a.createElement("option",{value:0},"Khu vực xây dựng"),G.a.getList().map((function(t,e){return v.a.createElement("option",{key:e,value:t.key},t.value)})))),v.a.createElement("div",{className:"form-row prelative policy"},v.a.createElement("input",{defaultChecked:!0,type:"checkbox"}),v.a.createElement("span",null," Tôi đã đọc và đồng ý các ",v.a.createElement("a",{href:"#"},"điều khoản sử dụng và chính sách bảo mật ")," của công ty ")),this.state.errorMsg&&v.a.createElement("div",{className:"msg-error"},v.a.createElement("span",null,"*** ",this.state.errorMsg)),v.a.createElement("div",{className:"btn-container"},v.a.createElement("button",{onClick:this._submit,className:"btn-insee btn-insee-bg"},"Đăng ký")))}}]),r}(g.Component),X=n(14);function $(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var tt=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if($()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){return s()(this,r),n.call(this,t)}return c()(r,[{key:"_onClickToZalo",value:function(){return window.location.href="https://zalo.me/2574239635754425040",!1}},{key:"render",value:function(){return v.a.createElement(V.a,this.props,v.a.createElement("span",{className:"contact100-form-title"},"Hoàn tất đăng ký",v.a.createElement("div",{className:"line-bt"})),v.a.createElement("div",{className:"form-description"},"Đơn đăng ký đã được hoàn tất. INSEE sẽ tiến hành kiểm tra và gửi tin nhắn xác nhận trong vòng 24 giờ"),v.a.createElement("div",{className:"btn-container btn-to-zalo"},v.a.createElement("button",{onClick:this._onClickToZalo,className:"btn-insee btn-default-none-bg"},"Quay lại Zalo")),v.a.createElement("div",{className:"btn-container"},v.a.createElement(X.b,{to:"/khach-hang"},v.a.createElement("button",{className:"btn-insee btn-insee-bg"},"Nhà thầu ngoại hạng"))))}}]),r}(g.Component),et=n(87),nt=n(130);n(131);function rt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var at={apiKey:"AIzaSyAEC96WyRueD1Ash54kgIHJ31BqGWHHS_4",authDomain:"insee-nt.firebaseapp.com",projectId:"insee-nt",storageBucket:"insee-nt.appspot.com",messagingSenderId:"1089546471836",appId:"1:1089546471836:web:4275dfaa3fc5d7330a6059",measurementId:"G-D60ZS1G34Q"},it=!1,st=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(rt()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),e=n.call(this,t),it||(nt.a.initializeApp(at),nt.a.auth().languageCode="vi",it=!0),e.dataRecaptcha=null,e.dataConfirmation=null,e.recaptcha=e.recaptcha.bind(l()(e)),e.sendOTP=e.sendOTP.bind(l()(e)),e.confirm=e.confirm.bind(l()(e)),e}return c()(r,[{key:"componentDidMount",value:function(){this.recaptcha()}},{key:"recaptcha",value:function(){var t=new nt.a.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible"});return this.dataRecaptcha=t,t}},{key:"sendOTP",value:function(t,e){console.log("sendOTP start.....");var n=this.dataRecaptcha?this.dataRecaptcha:this.recaptcha();console.log("sendOTP"),nt.a.auth().signInWithPhoneNumber(t,n).then(function(t){this.dataConfirmation=t,e(0)}.bind(this)).catch(function(t){e(-1),this.dataRecaptcha=null}.bind(this).bind(this))}},{key:"confirm",value:function(t,e){this.dataConfirmation.confirm(t).then((function(t){e(0,t)})).catch((function(t){e(-1,null)}))}},{key:"render",value:function(){return v.a.createElement("div",null,v.a.createElement("div",{id:"recaptcha-container"}))}}]),r}(v.a.Component);function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ct=function(t){p()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(ot()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d()(this,t)});function r(t){var e;return s()(this,r),(e=n.call(this,t)).phone=null,e.token=null,e.setPhone=e.setPhone.bind(l()(e)),e.setToken=e.setToken.bind(l()(e)),e}return c()(r,[{key:"setPhone",value:function(t){this.phone=t}},{key:"setToken",value:function(t){this.token=t}},{key:"render",value:function(){var t=this,e=this.props.app.register;return v.a.createElement("div",null,v.a.createElement(st,{ref:function(e){return t.firebase=e}}),e&&1==e.step&&v.a.createElement(L,a()({setPhone:this.setPhone,firebase:this.firebase},this.props)),e&&2==e.step&&v.a.createElement(Q,a()({setToken:this.setToken,phone:this.phone,firebase:this.firebase},this.props)),e&&3==e.step&&v.a.createElement(j,a()({token:this.token},this.props)),e&&4==e.step&&v.a.createElement(tt,this.props),v.a.createElement(et.a,this.props))}}]),r}(v.a.Component);e.default=Object(k.b)((function(t){return{app:t.app}}),(function(t){return{appActions:Object(E.b)(b,t)}}))(ct)},86:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l}));var r=n(2),a=n.n(r),i=n(3),s=n.n(i),o=/((|09|03|07|08|05)+([0-9]{8})\b)/i,c=function(){function t(){a()(this,t)}return s()(t,null,[{key:"getChangeAndValidate",value:function(t,e,n){var r={id:e.id};if(t.address!=e.address&&this.isValidAddress(t.address)&&(r.address=t.address),t.city!=e.city&&this.isValidCity(t.city)&&(r.city=t.city),t.district!=e.district&&this.isValidDistrict(t.district)&&(r.district=t.district),t.name!=e.name&&this.isValidStoreName(t.name)&&(r.name=t.name),t.phone!=e.phone&&this.isValidPhoneName(t.phone)&&(r.phone=t.phone),t.cement!=e.cement&&this.isValidCement(t.cement)&&(r.cement=t.cement),t.quantity!=e.quantity){if(!this.isValidQuantity(t.quantity,n.ruleQuantily))return null;r.quantity=t.quantity}return t.extra.agree[0]!=e.extra.agree[0]&&this.isValidPolicy(t.extra)&&(r.extra=t.extra),r}},{key:"isValid2Create",value:function(t,e){return this.isValidAddress(t.address)&&this.isValidCity(t.city)&&this.isValidDistrict(t.district)&&this.isValidStoreName(t.name)&&this.isValidPhoneName(t.phone)&&this.isValidCement(t.cement)&&this.isValidQuantity(t.quantity,e.ruleQuantily)&&this.isValidPolicy(t.extra)}},{key:"isValidAddress",value:function(t){if(!t)throw"Vui lòng nhập địa chỉ";if(t.length<=10)throw"Địa chỉ phải lớn hơn 10 ký tự";return!0}},{key:"isValidCity",value:function(t){if(0==t)throw"Vui lòng chọn thành phố";return!0}},{key:"isValidDistrict",value:function(t){if(0==t)throw"Vui lòng chọn quận";return!0}},{key:"isValidStoreName",value:function(t){if(!t)throw"Vui lòng nhập tên cửa hàng";if(t.length<=5)throw"Tên cửa hàng phải lớn hơn 5 ký tự";return!0}},{key:"isValidPhoneName",value:function(t){if(!t)throw"Vui lòng nhập số điện thoại";if(!o.test(t))throw"Số điện thoại không hợp lệ";return!0}},{key:"isValidQuantity",value:function(t,e){if(!t||0==t)throw"Vui lòng nhập số lượng sản phẩm";return!(t<e)}},{key:"isValidBill",value:function(t,e){if(!(t&&0!=t.length||e&&0!=e))throw"Vui lòng chọn ít nhất một hóa đơn";if(t&&t.length>=3)throw"Số hóa đơn nhỏ hơn 3";return!0}},{key:"isValidImg",value:function(t,e){if(!(t&&0!=t.length||e&&0!=e))throw"Vui lòng chọn ít nhất một hình ảnh";if(t&&t.length>=3)throw"Số hình ảnh nhỏ hơn 3";return!0}},{key:"isValidPolicy",value:function(t){var e=t.agree;if(!e||!e.includes(1))throw"Vui lòng đồng ý với điều khoản của chúng tôi";return!0}},{key:"isValidCement",value:function(t){if(!t||0==t)throw"Vui lòng nhập loại xi măng";return!0}}]),t}(),u=function(){function t(){a()(this,t)}return s()(t,null,[{key:"getChangeAndValidate",value:function(t,e){var n={};return t.address!=e.address&&this.isValidAddress(t.address)&&(n.address=t.address),t.city!=e.city&&this.isValidCity(t.city)&&(n.city=t.city),t.district!=e.district&&this.isValidDistrict(t.district)&&(n.district=t.district),t.name!=e.name&&this.isValidOwnerName(t.name)&&(n.name=t.name),t.phone!=e.phone&&this.isValidOwnerPhone(t.phone)&&(n.phone=t.phone),t.estimateTimeStart!=e.estimateTimeStart&&this.isValidEstimateTimeStart(t.estimateTimeStart)&&(n.estimateTimeStart=t.estimateTimeStart),t.typeConstruction!=e.typeConstruction&&this.isValidTypeConstruction(t.typeConstruction)&&(n.typeConstruction=t.typeConstruction),t.extra.agree[0]!=e.extra.agree[0]&&(n.extra=t.extra),n}},{key:"isValid2Create",value:function(t){return this.isValidAddress(t.address)&&this.isValidCity(t.city)&&this.isValidDistrict(t.district)&&this.isValidEstimateTimeStart(t.estimateTimeStart)&&this.isValidEstimateTimeStart(t.typeConstruction)&&this.isValidOwnerName(t.name)&&this.isValidOwnerPhone(t.phone)}},{key:"isValidAddress",value:function(t){if(!t)throw"Vui lòng nhập địa chỉ";if(t.length<=10)throw"Địa chỉ phải lớn hơn 10 ký tự";return!0}},{key:"isValidCity",value:function(t){if(0==t)throw"Vui lòng chọn thành phố";return!0}},{key:"isValidDistrict",value:function(t){if(0==t)throw"Vui lòng chọn quận";return!0}},{key:"isValidEstimateTimeStart",value:function(t){if(!t)throw"Vui lòng chọn thời gian công trình bắt đầu";return!0}},{key:"isValidTypeConstruction",value:function(t){if(!t||0==t)throw"Vui lòng chọn loại công trình";return!0}},{key:"isValidOwnerName",value:function(t){if(!t)throw"Vui lòng nhập tên chủ nhà";if(t.length<=3)throw"Tên chủ nhà lớn hơn 3 ký tự";return!0}},{key:"isValidOwnerPhone",value:function(t){if(!t)throw"Vui lòng nhập số điện thoại chủ nhà";if(!o.test(t))throw"Số điện thoại không hợp lệ";return!0}}]),t}(),l=function(){function t(){a()(this,t)}return s()(t,null,[{key:"isValid2Create",value:function(t){return this.isValidName(t.name)&&this.isValidArea(t.location)}},{key:"isValidPhone",value:function(t){if(!t)throw"Vui lòng nhập số điện thoại";if(t=t.replace(/\./g,""),!o.test(t))throw"Số điện thoại không hợp lệ";return!0}},{key:"isValidName",value:function(t){if(!t)throw"Vui lòng nhập họ và tên của bạn";if(t.length<=5)throw"Họ và tên phải lớn hơn 5 ký tự";return!0}},{key:"isValidBirthday",value:function(t){if(0!=t.error)throw t.errorMsg;return!0}},{key:"isValidArea",value:function(t){if(0==t)throw"Vui lòng nhập khu vực chính";return!0}}]),t}()},87:function(t,e,n){"use strict";var r=n(2),a=n.n(r),i=n(3),s=n.n(i),o=n(6),c=n.n(o),u=n(7),l=n.n(u),h=n(5),p=n.n(h),f=n(0),d=n.n(f);function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var y=function(t){c()(i,t);var e,r=(e=i,function(){var t,n=p()(e);if(m()){var r=p()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)});function i(t){return a()(this,i),r.call(this,t)}return s()(i,[{key:"shouldComponentUpdate",value:function(t,e){return this.props.app.isLoading!=t.app.isLoading}},{key:"render",value:function(){return this.props.app.isLoading?(document.body.scrollTop=0,document.documentElement.scrollTop=0,d.a.createElement("div",{className:"insee-app"},d.a.createElement("div",{className:"bg-loading"}),d.a.createElement("img",{className:"img-loading",src:n(48)}))):d.a.createElement("div",null)}}]),i}(f.Component);e.a=y}}]);